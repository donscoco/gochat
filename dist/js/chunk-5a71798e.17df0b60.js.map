{"version":3,"sources":["webpack:///./src/components/friend/FriendItem.vue?526c","webpack:///./src/view/Friend.vue","webpack:///./src/components/friend/AddFriend.vue","webpack:///src/components/friend/AddFriend.vue","webpack:///./src/components/friend/AddFriend.vue?405b","webpack:///./src/components/friend/AddFriend.vue?f893","webpack:///src/view/Friend.vue","webpack:///./src/view/Friend.vue?2734","webpack:///./src/view/Friend.vue?6615","webpack:///./src/components/friend/AddFriend.vue?c9c6","webpack:///./src/view/Friend.vue?0e29","webpack:///./src/components/friend/FriendItem.vue","webpack:///src/components/friend/FriendItem.vue","webpack:///./src/components/friend/FriendItem.vue?f95e","webpack:///./src/components/friend/FriendItem.vue?35de"],"names":["render","_vm","this","_c","_self","staticClass","attrs","model","value","searchText","callback","$$v","expression","slot","staticStyle","on","$event","handleShowAddFriend","showAddFriend","handleCloseAddFriend","_l","$store","state","friendStore","friends","friend","index","key","directives","name","rawName","nickName","startsWith","activeIndex","handleDelItem","nativeOn","handleActiveItem","userInfo","id","_v","_s","headImage","showFullImage","userName","sex","signature","handleSendMessage","staticRenderFns","dialogVisible","handleClose","type","indexOf","_k","keyCode","handleSearch","users","user","userStore","class","online","isFriend","handleAddFriend","components","HeadImage","data","props","methods","url","method","params","friendId","mounted","component","FriendItem","AddFriend","confirmButtonText","cancelButtonText","targetId","showName","updateFriendInfo","loadUserInfo","computed","active","showDelete","stopPropagation","handleDel","_e","_t","console","default"],"mappings":"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","file":"js/chunk-5a71798e.17df0b60.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=style&index=0&id=1938483d&prod&scope=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',[_c('el-aside',{staticClass:\"l-friend-box\",attrs:{\"width\":\"250px\"}},[_c('div',{staticClass:\"l-friend-header\"},[_c('div',{staticClass:\"l-friend-search\"},[_c('el-input',{attrs:{\"width\":\"200px\",\"placeholder\":\"搜索好友\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1)],1),_c('el-button',{staticStyle:{\"border\":\"none\",\"padding\":\"12px\",\"font-size\":\"20px\",\"color\":\"black\"},attrs:{\"plain\":\"\",\"icon\":\"el-icon-plus\",\"title\":\"添加好友\"},on:{\"click\":function($event){return _vm.handleShowAddFriend()}}}),_c('add-friend',{attrs:{\"dialogVisible\":_vm.showAddFriend},on:{\"close\":_vm.handleCloseAddFriend}})],1),_c('el-scrollbar',{staticClass:\"l-friend-list\"},_vm._l((_vm.$store.state.friendStore.friends),function(friend,index){return _c('div',{key:index},[_c('friend-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(friend.nickName.startsWith(_vm.searchText)),expression:\"friend.nickName.startsWith(searchText)\"}],attrs:{\"friend\":friend,\"index\":index,\"active\":index === _vm.$store.state.friendStore.activeIndex},on:{\"del\":function($event){return _vm.handleDelItem(friend,index)}},nativeOn:{\"click\":function($event){return _vm.handleActiveItem(friend,index)}}})],1)}),0)],1),_c('el-container',{staticClass:\"r-friend-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}],staticClass:\"r-friend-header\"},[_vm._v(\" \"+_vm._s(_vm.userInfo.nickName)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}]},[_c('div',{staticClass:\"user-detail\"},[_c('head-image',{staticClass:\"detail-head-image\",attrs:{\"size\":200,\"url\":_vm.userInfo.headImage},nativeOn:{\"click\":function($event){return _vm.showFullImage()}}}),_c('div',{staticClass:\"info-item\"},[_c('el-descriptions',{staticClass:\"description\",attrs:{\"title\":\"好友信息\",\"column\":1}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户名\"}},[_vm._v(_vm._s(_vm.userInfo.userName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"昵称\"}},[_vm._v(_vm._s(_vm.userInfo.nickName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"性别\"}},[_vm._v(_vm._s(_vm.userInfo.sex==0?\"男\":\"女\"))]),_c('el-descriptions-item',{attrs:{\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.userInfo.signature))])],1)],1)],1),_c('div',{staticClass:\"btn-group\"},[_c('el-button',{staticClass:\"send-btn\",on:{\"click\":function($event){return _vm.handleSendMessage()}}},[_vm._v(\"发消息\")])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"添加好友\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"输入好友昵称,最多展示10条\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearch()}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.handleSearch()}},slot:\"append\"})],1),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},_vm._l((_vm.users),function(user){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(user.id != _vm.$store.state.userStore.userInfo.id),expression:\"user.id != $store.state.userStore.userInfo.id\"}],key:user.id},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"avatar\"},[_c('head-image',{attrs:{\"url\":user.headImage}})],1),_c('div',{staticClass:\"add-friend-text\"},[_c('div',[_vm._v(_vm._s(user.nickName))]),_c('div',{class:user.online ? 'online-status  online':'online-status'},[_vm._v(_vm._s(user.online?\"[在线]\":\"[离线]\"))])]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFriend(user.id)),expression:\"!isFriend(user.id)\"}],attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleAddFriend(user)}}},[_vm._v(\"添加\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend(user.id)),expression:\"isFriend(user.id)\"}],attrs:{\"type\":\"info\",\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"已添加\")])],1)])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-dialog title=\"添加好友\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\n\t\t<el-input  placeholder=\"输入好友昵称,最多展示10条\" class=\"input-with-select\" v-model=\"searchText\" @keyup.enter.native=\"handleSearch()\">\n\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleSearch()\"></el-button>\n\t\t</el-input>\n\t\t<el-scrollbar style=\"height:400px\">\n\t\t\t<div v-for=\"(user) in users\" :key=\"user.id\" v-show=\"user.id != $store.state.userStore.userInfo.id\">\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<head-image :url=\"user.headImage\"></head-image>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"add-friend-text\">\n\t\t\t\t\t\t<div>{{user.nickName}}</div>\n\t\t\t\t\t\t<div :class=\"user.online ? 'online-status  online':'online-status'\">{{ user.online?\"[在线]\":\"[离线]\"}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t <el-button type=\"success\" v-show=\"!isFriend(user.id)\" plain @click=\"handleAddFriend(user)\">添加</el-button>\n\t\t\t\t\t <el-button type=\"info\" v-show=\"isFriend(user.id)\" plain disabled>已添加</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-scrollbar>\n\t</el-dialog>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue'\n\t\n\t\n\texport default {\n\t\tname: \"addFriend\",\n\t\tcomponents:{HeadImage},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tusers: [],\n\t\t\t\tsearchText: \"\"\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tdialogVisible: {\n\t\t\t\ttype: Boolean\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\thandleClose() {\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t},\n\t\t\thandleSearch() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/user/findByNickName\",\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tnickName: this.searchText\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.users = data;\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleAddFriend(user){\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/friend/add\",\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tfriendId: user.id\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\t\tlet friend = {\n\t\t\t\t\t\tid:user.id,\n\t\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\t\tonline: user.online\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.commit(\"addFriend\",friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tisFriend(userId){\n\t\t\t\tlet friends = this.$store.state.friendStore.friends;\n\t\t\t\tlet friend = friends.find((f)=> f.id==userId);\t\t\t\n\t\t\t\treturn friend != undefined;\n\t\t\t}\n\t\t},\n\t\n\t\tmounted() {\n\t\t\tthis.handleSearch();\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\n\t.item {\n\t\theight: 80px;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tpadding-left: 15px;\n\t\talign-items: center;\n\t\tpadding-right: 25px;\n\t\t\n\t\t.add-friend-text {\n\t\t\tmargin-left: 15px;\n\t\t\tline-height: 80px;\n\t\t\tflex: 3;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\theight: 100%;\n\t\t\tflex-shrink: 0;\n\t\t\toverflow: hidden;\n\t\t\n\t\t\t.online-status{\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\t&.online{\n\t\t\t\t\tcolor: #5fb878;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddFriend.vue?vue&type=template&id=1b3ff3b4&scoped=true&\"\nimport script from \"./AddFriend.vue?vue&type=script&lang=js&\"\nexport * from \"./AddFriend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddFriend.vue?vue&type=style&index=0&id=1b3ff3b4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b3ff3b4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<el-container>\n\t\t<el-aside width=\"250px\" class=\"l-friend-box\">\n\t\t\t<div class=\"l-friend-header\">\n\t\t\t\t<div class=\"l-friend-search\">\n\t\t\t\t\t<el-input width=\"200px\" placeholder=\"搜索好友\" v-model=\"searchText\">\n\t\t\t\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\n\t\t\t\t\t</el-input>\n\t\t\t\t</div>\n\t\t\t\t<el-button plain icon=\"el-icon-plus\" style=\"border: none; padding:12px; font-size: 20px;color: black;\" title=\"添加好友\"\n\t\t\t\t @click=\"handleShowAddFriend()\"></el-button>\n\t\t\t\t<add-friend :dialogVisible=\"showAddFriend\" @close=\"handleCloseAddFriend\">\n\t\t\t\t</add-friend>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"l-friend-list\" >\n\t\t\t\t<div v-for=\"(friend,index) in $store.state.friendStore.friends\" :key=\"index\">\n\t\t\t\t\t<friend-item v-show=\"friend.nickName.startsWith(searchText)\" :friend=\"friend\" :index=\"index\" :active=\"index === $store.state.friendStore.activeIndex\"\n\t\t\t\t\t @del=\"handleDelItem(friend,index)\" @click.native=\"handleActiveItem(friend,index)\">\n\t\t\t\t\t</friend-item>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\t\t<el-container class=\"r-friend-box\">\n\t\t\t<div class=\"r-friend-header\" v-show=\"userInfo.id\">\n\t\t\t\t{{userInfo.nickName}}\n\t\t\t</div>\n\t\t\t<div v-show=\"userInfo.id\">\n\t\t\t\t<div class=\"user-detail\">\n\t\t\t\t\t<head-image class=\"detail-head-image\" :size=\"200\" \n\t\t\t\t\t:url=\"userInfo.headImage\" @click.native=\"showFullImage()\"></head-image>\n\t\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t\t<el-descriptions title=\"好友信息\" class=\"description\" :column=\"1\">\n\t\t\t\t\t\t\t<el-descriptions-item label=\"用户名\">{{ userInfo.userName }}\n\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t<el-descriptions-item label=\"昵称\">{{ userInfo.nickName }}\n\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t<el-descriptions-item label=\"性别\">{{ userInfo.sex==0?\"男\":\"女\" }}</el-descriptions-item>\n\t\t\t\t\t\t\t<el-descriptions-item label=\"签名\">{{ userInfo.signature }}</el-descriptions-item>\n\t\t\t\t\t\t</el-descriptions>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t<el-button class=\"send-btn\" @click=\"handleSendMessage()\">发消息</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n<script>\n\timport FriendItem from \"../components/friend/FriendItem.vue\";\n\timport AddFriend from \"../components/friend/AddFriend.vue\";\n\timport HeadImage from \"../components/common/HeadImage.vue\";\n\n\texport default {\n\t\tname: \"friend\",\n\t\tcomponents: {\n\t\t\tFriendItem,\n\t\t\tAddFriend,\n\t\t\tHeadImage\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsearchText: \"\",\n\t\t\t\tshowAddFriend: false,\n\t\t\t\tuserInfo: {}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\thandleShowAddFriend() {\n\t\t\t\tthis.showAddFriend = true;\n\t\t\t},\n\t\t\thandleCloseAddFriend() {\n\t\t\t\tthis.showAddFriend = false;\n\t\t\t},\n\t\t\thandleActiveItem(friend, index) {\n\t\t\t\tthis.$store.commit(\"activeFriend\", index);\n\t\t\t\tthis.loadUserInfo(friend,index);\n\t\t\t},\n\t\t\thandleDelItem(friend, index) {\n\t\t\t\tthis.$confirm(`确认要解除与 '${friend.nickName}'的好友关系吗?`, '确认解除?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/friend/delete/${friend.id}`,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then((data) => {\n\t\t\t\t\t\tthis.$message.success(\"删除好友成功\");\n\t\t\t\t\t\tthis.$store.commit(\"removeFriend\", index);\n\t\t\t\t\t\tthis.$store.commit(\"removePrivateChat\", friend.id);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleSendMessage() {\n\t\t\t\tlet user = this.userInfo;\n\t\t\t\tlet chat = {\n\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\ttargetId: user.id,\n\t\t\t\t\tshowName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t};\n\t\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t},\n\t\t\tshowFullImage(){\n\t\t\t\tif(this.userInfo.headImage){\n\t\t\t\t\tthis.$store.commit('showFullImageBox',this.userInfo.headImage);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tupdateFriendInfo(friend, user, index) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tfriend = JSON.parse(JSON.stringify(friend));\n\t\t\t\tfriend.headImage = user.headImageThumb;\n\t\t\t\tfriend.nickName = user.nickName;\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/friend/update\",\n\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\tdata: friend\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", user);\n\t\t\t\t})\n\t\t\t},\n\t\t\tloadUserInfo(friend,index){\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/user/find/${friend.id}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((user) => {\n\t\t\t\t\tthis.userInfo = user;\n\t\t\t\t\t// 如果发现好友的头像和昵称改了，进行更新\n\t\t\t\t\t// if (user.headImageThumb != friend.headImage ||\n\t\t\t\t\t// \tuser.nickName != friend.nickName) {\n\t\t\t\t\t// \tthis.updateFriendInfo(friend, user, index)\n\t\t\t\t\t// }\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\tfriendStore(){\n\t\t\t\treturn this.$store.state.friendStore;\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tif(this.friendStore.activeIndex>=0){\n\t\t\t\tlet friend = this.friendStore.friends[this.friendStore.activeIndex];\n\t\t\t\tthis.loadUserInfo(friend,this.friendStore.activeIndex);\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.el-container {\n\t\t.l-friend-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder: #dddddd solid 1px;\n\t\t\tbackground: white;\n\t\t\t.l-friend-header {\n\t\t\t\theight: 50px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 5px;\n\t\t\t\tbackground-color: white;\n\n\t\t\t\t.l-friend-search {\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.l-friend-ist{\n\t\t\t\tflex: 1;\n\t\t\t}\n\t\t}\n\n\t\t.r-friend-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder: #dddddd solid 1px;\n\t\t\t.r-friend-header {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50px;\n\t\t\t\tpadding: 5px;\n\t\t\t\tline-height: 50px;\n\t\t\t\tfont-size: 20px;\n\t\t\t\ttext-align: left;\n\t\t\t\ttext-indent: 10px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tbackground-color: white;\n\t\t\t\tborder: #dddddd solid 1px;\n\t\t\t}\n\t\t\t\n\t\t\t.user-detail {\n\t\t\t\twidth: 100%;\n\t\t\t\tdisplay: flex;\n\t\t\t\tpadding: 50px 10px 10px 50px;\n\t\t\t\ttext-align: center;\n\t\t\t\t\n\t\t\t\t.info-item {\n\t\t\t\t\twidth: 400px;\n\t\t\t\t\theight: 200px;\n\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\tbackground-color: #ffffff;\n\t\t\t\t}\n\t\t\t\t.description {\n\t\t\t\t\tpadding: 20px 20px 0px 20px;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.btn-group {\n\t\t\t\ttext-align: left !important;\n\t\t\t\tpadding-left: 100px;\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Friend.vue?vue&type=template&id=67b158e5&scoped=true&\"\nimport script from \"./Friend.vue?vue&type=script&lang=js&\"\nexport * from \"./Friend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Friend.vue?vue&type=style&index=0&id=67b158e5&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67b158e5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=style&index=0&id=1b3ff3b4&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=style&index=0&id=67b158e5&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"friend-item\",class:_vm.active ? 'active' : ''},[_c('div',{staticClass:\"avatar\"},[_c('head-image',{attrs:{\"url\":_vm.friend.headImage}})],1),_c('div',{staticClass:\"text\"},[_c('div',[_vm._v(_vm._s(_vm.friend.nickName))]),_c('div',{class:_vm.online ? 'online-status  online':'online-status'},[_vm._v(_vm._s(_vm.online?\"[在线]\":\"[离线]\"))])]),(_vm.showDelete)?_c('div',{staticClass:\"close\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDel()}}},[_c('i',{staticClass:\"el-icon-close\",staticStyle:{\"border\":\"none\",\"font-size\":\"20px\",\"color\":\"black\"},attrs:{\"title\":\"添加好友\"}})]):_vm._e(),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"friend-item\" :class=\"active ? 'active' : ''\">\n\t\t<div class=\"avatar\">\n\t\t\t<head-image :url=\"friend.headImage\"> </head-image>\n\t\t</div>\n\t\t<div class=\"text\">\n\t\t\t<div>{{ friend.nickName}}</div>\n\t\t\t<div :class=\"online ? 'online-status  online':'online-status'\">{{ online?\"[在线]\":\"[离线]\"}}</div>\n\t\t</div>\n\t\t<div v-if=\"showDelete\" class=\"close\" @click.stop=\"handleDel()\">\n\t\t\t<i class=\"el-icon-close\" style=\"border: none; font-size: 20px;color: black;\" title=\"添加好友\"></i>\n\t\t</div>\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue';\n\n\texport default {\n\t\tname: \"frinedItem\",\n\t\tcomponents: {\n\t\t\tHeadImage\n\t\t},\n\t\tdata() {\n\t\t\treturn {}\n\t\t},\n\t\tmethods:{\n\t\t\thandleDel(){\n\t\t\t\tconsole.log(\"11111111111111111111\")\n\t\t\t\tthis.$emit('del',this.friend,this.index)\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tfriend: {\n\t\t\t\ttype: Object\n\t\t\t},\n\t\t\tactive: {\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\tindex: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tshowDelete:{\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tonline() {\n\t\t\t\treturn this.$store.state.friendStore.friends[this.index].online;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scope lang=\"scss\">\n\t.friend-item {\n\t\theight: 65px;\n\t\tdisplay: flex;\n\t\tmargin-bottom: 1px;\n\t\tposition: relative;\n\t\tpadding-left: 15px;\n\t\talign-items: center;\n\t\tpadding-right: 5px;\n\t\tbackground-color: #fafafa;\n\t\twhite-space: nowrap;\n\t\t&:hover {\n\t\t\tbackground-color: #eeeeee;\n\t\t}\n\n\t\t&.active {\n\t\t\tbackground-color: #dddddd;\n\t\t}\n\n\n\t\t.close {\n\t\t\twidth: 1.5rem;\n\t\t\theight: 1.5rem;\n\t\t\tright: 10px;\n\t\t\ttop: 1.825rem;\n\t\t\tcursor: pointer;\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t&:hover {\n\t\t\t.close {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\n\t\t.avatar {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\twidth: 45px;\n\t\t\theight: 45px;\n\t\t}\n\n\t\t.text {\n\t\t\tmargin-left: 15px;\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-around;\n\t\t\theight: 100%;\n\t\t\tflex-shrink: 0;\n\t\t\toverflow: hidden;\n\n\t\t\t&>div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: flex-start;\n\t\t\t}\n\n\t\t\t.online-status {\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-weight: 600;\n\n\t\t\t\t&.online {\n\t\t\t\t\tcolor: #5fb878;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FriendItem.vue?vue&type=template&id=1938483d&\"\nimport script from \"./FriendItem.vue?vue&type=script&lang=js&\"\nexport * from \"./FriendItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FriendItem.vue?vue&type=style&index=0&id=1938483d&prod&scope=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}